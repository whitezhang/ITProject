{% extends 'searchtool/base.html' %}

{% load staticfiles %}

<!--Block head-->
{% block head %}
{% endblock %}

<!--Block main_content-->
{% block main_content %}
<script type="text/javascript">
	$(function () {
        var that = this;
        $("#jRate").jRate({
            rating: 3,
            strokeColor: 'black',
            startColor: 'cyan',
            endColor: 'blue',
            shape: 'TWITTER',
            opacity: 0.7,
            precision: 0,
            width: 50,
            height: 50,
            onChange: function(rating) {
                console.log("OnChange: Rating: "+rating);
            },
            onSet: function(rating) {
                console.log("OnSet: Rating: "+rating);
                sendRates(rating);
            }
        });
	});

    function sendRates(rating) {
	    $.get('/searchtool/ratebook/', {rating: rating}, function(data) {
	        $('#test').html(data);
        });
    };

    function sendLike() {
        $.get('/searchtool/likebook/', {}, function() {
            $('#liked').val('True')
            $('#liked').removeClass('linkButton');
            $('#liked').addClass('linkButtonToWord');
        });
    };

</script>
<script src="{% static 'js/jRate.js' %}" type="text/javascript"></script>

<div>
    <h4>{{ book.title }}</h4>
    <h4>{{ book.authors }}</h4>
    <h4>{{ book.publishedDate }}</h4>
    {% if book.isLiked %}
    YES!!!
    {% else %}
    <input id="liked" type="button" class="linkButton" name="liked" value="{{ book.isLiked }}" onclick="sendLike()"/>
    {% endif %}

    <h4 id="test">2</h4>

    <div id="jRate"></div>
</div>

{% endblock %}
